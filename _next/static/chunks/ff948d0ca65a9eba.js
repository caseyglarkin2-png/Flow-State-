(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49379,e=>{"use strict";var t=e.i(43476),s=e.i(71645);let a={trailers:0,trucks:0,loadingDocks:0,shippingDocks:0,gates:0,guardShacks:0,parkingSpots:0,trailerYards:0};function r({onFacilityCreated:e}){let[r,l]=(0,s.useState)(""),[d,i]=(0,s.useState)(!1),[n,o]=(0,s.useState)([]),[c,x]=(0,s.useState)(null),[h,m]=(0,s.useState)(""),[u,b]=(0,s.useState)("DC"),[p,g]=(0,s.useState)(a),[f,j]=(0,s.useState)(0),[v,N]=(0,s.useState)(""),[F,w]=(0,s.useState)(!1),[y,k]=(0,s.useState)(!1),[M,S]=(0,s.useState)([]),[C,B]=(0,s.useState)(18),D=async()=>{if(r.trim()){i(!0),o([]);try{let e=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r)}&limit=5&addressdetails=1`,{headers:{"User-Agent":"FlowState-YardBuilder/1.0"}});if(e.ok){let t=await e.json();o(t)}}catch(e){console.error("Search failed:",e)}finally{i(!1)}}},A=async()=>{if(!c)return;w(!0),await new Promise(e=>setTimeout(e,2e3));let e="DC"===u?1.5:"Plant"===u?1.2:1;g({trailers:Math.floor(80*Math.random()*e)+20,trucks:Math.floor(40*Math.random()*e)+10,loadingDocks:Math.floor(20*Math.random()*e)+5,shippingDocks:Math.floor(15*Math.random()*e)+3,gates:Math.floor(4*Math.random())+2,guardShacks:Math.floor(2*Math.random())+1,parkingSpots:Math.floor(100*Math.random()*e)+50,trailerYards:Math.floor(3*Math.random())+1}),j(Math.floor(50*Math.random())+10),w(!1),k(!0)};return(0,t.jsxs)("div",{className:"h-full flex",children:[(0,t.jsxs)("div",{className:"w-96 bg-[#0a0a0a] border-r border-[#1a1a1a] flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-[#1a1a1a]",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-[#00B4FF]",children:"âš¡"}),"YardBuilder AI"]}),(0,t.jsx)("p",{className:"text-xs text-[#666] mt-1",children:"Generate facility digital twins"})]}),(0,t.jsxs)("div",{className:"p-4 border-b border-[#1a1a1a]",children:[(0,t.jsx)("label",{className:"text-xs text-[#888] uppercase tracking-wider",children:"Search Address"}),(0,t.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),onKeyDown:e=>"Enter"===e.key&&D(),placeholder:"Enter facility address...",className:"flex-1 bg-[#111] border border-[#222] rounded px-3 py-2 text-sm text-white placeholder-[#555] focus:outline-none focus:border-[#00B4FF]"}),(0,t.jsx)("button",{onClick:D,disabled:d,className:"px-4 py-2 bg-[#00B4FF] text-black text-sm font-medium rounded hover:bg-[#00B4FF]/90 disabled:opacity-50",children:d?"...":"Search"})]}),n.length>0&&(0,t.jsx)("div",{className:"mt-2 bg-[#111] border border-[#222] rounded max-h-48 overflow-y-auto",children:n.map((e,s)=>(0,t.jsx)("button",{onClick:()=>{x({address:e.display_name,lat:parseFloat(e.lat),lon:parseFloat(e.lon)}),o([]),m(e.name||e.display_name.split(",")[0]),k(!1)},className:"w-full text-left px-3 py-2 text-sm text-[#ccc] hover:bg-[#1a1a1a] border-b border-[#1a1a1a] last:border-b-0",children:e.display_name},s))})]}),c&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"p-4 border-b border-[#1a1a1a]",children:[(0,t.jsx)("label",{className:"text-xs text-[#888] uppercase tracking-wider",children:"Selected Location"}),(0,t.jsxs)("p",{className:"mt-1 text-sm text-white",children:[c.address.substring(0,100),"..."]}),(0,t.jsxs)("p",{className:"mt-1 text-xs text-[#00B4FF] font-mono",children:[c.lat.toFixed(6),", ",c.lon.toFixed(6)]})]}),(0,t.jsxs)("div",{className:"p-4 border-b border-[#1a1a1a] space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-[#888] uppercase tracking-wider",children:"Facility Name"}),(0,t.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),className:"mt-1 w-full bg-[#111] border border-[#222] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-[#00B4FF]"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-[#888] uppercase tracking-wider",children:"Facility Type"}),(0,t.jsxs)("select",{value:u,onChange:e=>b(e.target.value),className:"mt-1 w-full bg-[#111] border border-[#222] rounded px-3 py-2 text-sm text-white focus:outline-none focus:border-[#00B4FF]",children:[(0,t.jsx)("option",{value:"DC",children:"Distribution Center"}),(0,t.jsx)("option",{value:"Plant",children:"Manufacturing Plant"}),(0,t.jsx)("option",{value:"CrossDock",children:"Cross-Dock"}),(0,t.jsx)("option",{value:"Terminal",children:"Terminal"}),(0,t.jsx)("option",{value:"Yard",children:"Yard"})]})]}),(0,t.jsx)("button",{onClick:A,disabled:F,className:"w-full py-2 bg-[#1a1a1a] border border-[#00B4FF] text-[#00B4FF] text-sm font-medium rounded hover:bg-[#00B4FF]/10 disabled:opacity-50 flex items-center justify-center gap-2",children:F?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"w-4 h-4 border-2 border-[#00B4FF] border-t-transparent rounded-full animate-spin"}),"Analyzing..."]}):(0,t.jsx)(t.Fragment,{children:"ðŸ” Analyze Yard Assets"})})]}),y&&(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[(0,t.jsx)("label",{className:"text-xs text-[#888] uppercase tracking-wider",children:"Asset Counts"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(p).map(([e,s])=>(0,t.jsxs)("div",{className:"bg-[#111] border border-[#222] rounded p-2",children:[(0,t.jsx)("label",{className:"text-xs text-[#666] capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),(0,t.jsx)("input",{type:"number",value:s,onChange:t=>{var s;return s=parseInt(t.target.value)||0,void g(t=>({...t,[e]:Math.max(0,s)}))},className:"w-full bg-transparent text-white text-lg font-semibold focus:outline-none"})]},e))}),(0,t.jsxs)("div",{className:"bg-[#111] border border-[#222] rounded p-2",children:[(0,t.jsx)("label",{className:"text-xs text-[#666]",children:"Total Acreage"}),(0,t.jsx)("input",{type:"number",value:f,onChange:e=>j(parseInt(e.target.value)||0),className:"w-full bg-transparent text-white text-lg font-semibold focus:outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-[#888] uppercase tracking-wider",children:"Notes"}),(0,t.jsx)("textarea",{value:v,onChange:e=>N(e.target.value),placeholder:"Additional notes...",className:"mt-1 w-full bg-[#111] border border-[#222] rounded px-3 py-2 text-sm text-white placeholder-[#555] focus:outline-none focus:border-[#00B4FF] h-20 resize-none"})]}),(0,t.jsx)("button",{onClick:()=>{if(!c||!h)return;let t={id:`FAC-${Date.now()}`,name:h,address:c.address,lat:c.lat,lon:c.lon,assets:p,facilityType:u,totalAcreage:f,notes:v,createdAt:new Date};S(e=>[...e,t]),e?.(t),x(null),m(""),g(a),j(0),N(""),k(!1),l("")},disabled:!h,className:"w-full py-3 bg-[#00B4FF] text-black text-sm font-bold rounded hover:bg-[#00B4FF]/90 disabled:opacity-50",children:"Generate Digital Twin"})]})]}),M.length>0&&(0,t.jsxs)("div",{className:"border-t border-[#1a1a1a] p-4",children:[(0,t.jsxs)("label",{className:"text-xs text-[#888] uppercase tracking-wider",children:["Generated Facilities (",M.length,")"]}),(0,t.jsx)("div",{className:"mt-2 space-y-2 max-h-40 overflow-y-auto",children:M.map(e=>(0,t.jsxs)("div",{className:"bg-[#111] border border-[#222] rounded p-2",children:[(0,t.jsx)("div",{className:"text-sm text-white font-medium",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-[#666]",children:[e.facilityType," â€¢ ",e.assets.trailers," trailers"]})]},e.id))})]})]}),(0,t.jsxs)("div",{className:"flex-1 relative bg-[#0a0a0a]",children:[c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("iframe",{src:`https://www.google.com/maps?q=${c.lat},${c.lon}&z=${C}&t=k&output=embed`,className:"w-full h-full border-0",allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"}),(0,t.jsxs)("a",{href:`https://www.google.com/maps/@${c.lat},${c.lon},${C}z/data=!3m1!1e3`,target:"_blank",rel:"noopener noreferrer",className:"absolute top-4 left-4 px-3 py-2 bg-[#0F0F0F]/90 border border-[#222] rounded text-white text-sm hover:bg-[#1a1a1a] flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Open in Google Maps"]})]}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ›°ï¸"}),(0,t.jsx)("p",{className:"text-[#888] text-lg",children:"Search for an address to view satellite imagery"}),(0,t.jsx)("p",{className:"text-[#555] text-sm mt-2",children:"Enter a facility address in the search box"})]})}),(0,t.jsxs)("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[(0,t.jsx)("button",{onClick:()=>B(e=>Math.min(21,e+1)),className:"w-10 h-10 bg-[#0F0F0F]/90 border border-[#222] rounded text-white hover:bg-[#1a1a1a] text-xl font-bold",children:"+"}),(0,t.jsx)("button",{onClick:()=>B(e=>Math.max(15,e-1)),className:"w-10 h-10 bg-[#0F0F0F]/90 border border-[#222] rounded text-white hover:bg-[#1a1a1a] text-xl font-bold",children:"âˆ’"}),(0,t.jsxs)("div",{className:"w-10 h-10 bg-[#0F0F0F]/90 border border-[#222] rounded text-white flex items-center justify-center text-xs",children:[C,"x"]})]}),c&&(0,t.jsxs)("div",{className:"absolute bottom-20 left-4 px-3 py-2 bg-[#0F0F0F]/90 border border-[#222] rounded text-xs font-mono text-[#00B4FF]",children:[c.lat.toFixed(6),", ",c.lon.toFixed(6)]}),c&&y&&(0,t.jsxs)("div",{className:"absolute bottom-4 left-4 right-4 bg-[#0F0F0F]/95 border border-[#00B4FF]/30 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-white font-semibold",children:h||"Unnamed Facility"}),(0,t.jsx)("p",{className:"text-[#888] text-sm",children:u})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-[#00B4FF] text-2xl font-bold",children:p.trailers+p.trucks}),(0,t.jsx)("div",{className:"text-[#666] text-xs",children:"Total Vehicles"})]})]}),(0,t.jsxs)("div",{className:"mt-3 grid grid-cols-4 gap-3",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:p.trailers}),(0,t.jsx)("div",{className:"text-[#666] text-xs",children:"Trailers"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:p.trucks}),(0,t.jsx)("div",{className:"text-[#666] text-xs",children:"Trucks"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:p.loadingDocks}),(0,t.jsx)("div",{className:"text-[#666] text-xs",children:"Loading Docks"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:p.gates}),(0,t.jsx)("div",{className:"text-[#666] text-xs",children:"Gates"})]})]})]})]})]})}e.s(["default",()=>r])}]);